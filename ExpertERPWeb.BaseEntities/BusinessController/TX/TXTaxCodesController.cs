using System;
using System.Data;
using System.Text;
using System.Collections.Generic;
using ExpertWebLib;
namespace ExpertERP.BusinessEntities
{
	#region TXTaxCodes
	//-----------------------------------------------------------
	//Generated By: GMC Studio
	//Class:TXTaxCodesController
	//Created Date:Thursday, February 26, 2009
	//-----------------------------------------------------------
	
	public class TXTaxCodesController:BaseBusinessController
	{
		public TXTaxCodesController()
		{
			dal= new DALBaseProvider("TXTaxCodes",typeof(TXTaxCodesInfo));
		}

        public bool CheckExitsTypeAndPctCodes(string type, double pctCode)
        {
            string strQuery = String.Format("select count(*) from TXTaxCodes where AAStatus = 'Alive' and TXTaxCodePct = {0} and TXTaxCodeTypeCombo = '{1}'", pctCode, type);
            DataSet ds = dal.GetDataSet(strQuery);
            if (ds.Tables.Count > 0 && ds.Tables[0].Rows.Count > 0 && ds.Tables[0].Rows[0][0] != null && ds.Tables[0].Rows[0][0].ToString().Length > 0)
            {
                int result = (int)ds.Tables[0].Rows[0][0];
                if (result > 0)
                {
                    return true;
                }
            }
            return false;
        }

        public DataSet GetAllDataByTypeTax(string type)
        {
            string strQuery = string.Format("select * from TXTaxCodes where AAStatus = 'Alive' and TXTaxCodeTypeCombo = '{0}'", type);
            return dal.GetDataSet(strQuery);
        }
        //(Thang - 18/9/2015 lấy thuế theo từng loại có kèm 1 dòng trống
        public DataSet GetAllDataByTypeTaxWithDummy(string type)
        {
            string strQuery = string.Format(@"select * from TXTaxCodes 
                                                where (AAStatus = 'Alive'
                                                and TXTaxCodeTypeCombo like '{0}') or AAStatus = 'Dummy'", type);
            return dal.GetDataSet(strQuery);
        }
        //)
    }
    #endregion
}