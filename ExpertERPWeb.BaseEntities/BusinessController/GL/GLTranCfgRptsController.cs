using System;
using System.Data;
using System.Text;
using System.Collections.Generic;
using ExpertWebLib;
namespace ExpertERP.BusinessEntities
{
	#region GLTranCfgRpts
	//-----------------------------------------------------------
	//Generated By: GMC Studio
	//Class:GLTranCfgRptsController
	//Created Date:Friday, August 22, 2014
	//-----------------------------------------------------------
	
	public class GLTranCfgRptsController:BaseBusinessController
	{
		public GLTranCfgRptsController()
		{
			dal= new DALBaseProvider("GLTranCfgRpts",typeof(GLTranCfgRptsInfo));
		}
        public DataSet GetAllDataByTranCfgID(int piTranCfgID)
        {
            string query = string.Format(@"
SELECT a.* 
INTO #tKQ
    FROM GLTranCfgRpts a
    WHERE FK_GLTranCfgID = {0}
UPDATE #tKQ SET AASelected = 0
SELECT * FROM #tKQ
DROP TABLE #tKQ
", piTranCfgID);
            DataSet ds = dal.GetDataSet(query);
            return ds;
        }
		public DataSet GetAllDataByModuleName(string psModName, string psNotINID = "")
        {
            String strQuery = String.Format(@"
SELECT GLTranCfgGroupRptID as FK_GLTranCfgGroupRptID 
	,cast(1 as bit) as AASelected
	,cast(1 as int) as GLTranCfgRptCopies
FROM dbo.GLTranCfgGroupRpts b
INNER JOIN GLTranCfgGroups c ON b.FK_GLTranCfgGroupID = c.GLTranCfgGroupID
INNER JOIN GLTranCfgGroupModules d ON d.FK_GLTranCfgGroupID = c.GLTranCfgGroupID 
    AND GLTranCfgGroupModuleName = '{0}'", psModName);
            if (psNotINID != "")
                strQuery += String.Format(@"
    AND GLTranCfgGroupRptID NOT IN ({0})", psNotINID);
            return dal.GetDataSet(strQuery);
        }
	}
	#endregion
}