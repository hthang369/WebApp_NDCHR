using System;
using System.Data;
using System.Text;
using System.Collections.Generic;
using ExpertWebLib;
namespace ExpertERP.BusinessEntities
{
	#region ViewShipmentItems
	//-----------------------------------------------------------
	//Generated By: Expert Studio
	//Class:ViewShipmentItemsController
	//Created Date:05 Tháng Tám 2013
	//-----------------------------------------------------------
	
	public class ViewShipmentItemsController:BaseBusinessController
	{
		public ViewShipmentItemsController()
		{
			dal= new DALBaseProvider("ViewShipmentItems",typeof(ViewShipmentItemsInfo));
		}
        public DataSet GetAllShpByCustProductTypeGroupInRange(int iCustomerID, int iProductGroupID, int iProductTypeID, DateTime dteFromDate, DateTime dteToDate)
        {
            string strQueryDate = DALUtil.GenerateBeetween("ICShipmentDate", dteFromDate, dteToDate);
            string strQuery = string.Format(@"Select ICShipmentItems.ICShipmentItemQty as ViewShipmentItemQty, ICShipmentItems.ICShipmentItemLotNo as ViewShipmentItemLotNo,ICShipmentItems.FK_ICProductID,ICShipmentItems.FK_ICShipmentID,ICShipmentItems.FK_ICStockID,ICProducts.FK_ICProductModelID,ICProducts.FK_ICProductClassID
                                                        ,ICShipments.ICShipmentDate as ViewShipmentItemDate,ICShipmentItems.ICShipmentItemFUnitPrice as ViewShipmentItemFUnitPrice
                                                        , ICShipmentItems.ICShipmentItemUnitPrice as ViewShipmentItemUnitPrice,ICShipmentItems.ICShipmentItemFPrice as ViewShipmentItemFPrice,ICShipmentItems.ICShipmentItemPrice as ViewShipmentItemPrice
                                                        ,ICProducts.ICProductLength as ViewShipmentItemLength,ICProducts.ICProductWidth asViewShipmentItemWidth, ICProducts.ICProductHeight as ViewShipmentItemHeight
                                                        ,ICProducts.FK_ICStkUOMID AS FK_ICUOMID
                                                        from ICShipmentItems 
                                                        inner join ICShipments on ICShipmentItems.FK_ICShipmentID=ICShipments.ICShipmentID
                                                        inner join ICProducts on ICProducts.ICProductID=ICShipmentItems.FK_ICProductID
                                                        where ICShipmentItems.AAStatus='Alive' AND ICShipments.AAStatus='Alive' AND (ICShipments.FK_ARCustomerID={2} or {2}=0) AND {3}
                                              AND ICShipmentItems.FK_ICProductID in (Select ICProductID from ICProducts where AAStatus='Alive' AND (FK_ICProductTypeID={0} or {0}=0) AND (FK_ICProductGroupID={1} or {1}=0))
                                                "
                                                , iProductTypeID, iProductGroupID, iCustomerID, strQueryDate);
            return dal.GetDataSet(strQuery);

        }
	}
	#endregion
}