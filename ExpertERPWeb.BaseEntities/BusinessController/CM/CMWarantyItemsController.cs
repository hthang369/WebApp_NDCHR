using System;
using System.Data;
using System.Text;
using System.Collections.Generic;
using ExpertWebLib;
namespace ExpertERP.BusinessEntities
{
	#region CMWarantyItems
	//-----------------------------------------------------------
	//Generated By: GMC Studio
	//Class:CMWarantyItemsController
	//Created Date:Thursday, June 23, 2011
	//-----------------------------------------------------------
	
	public class CMWarantyItemsController:BaseBusinessController
	{
		public CMWarantyItemsController()
		{
			dal= new DALBaseProvider("CMWarantyItems",typeof(CMWarantyItemsInfo));
		}

        public CMWarantyItemsInfo GetWarantyItemByWarantyIDAndProductAndSerialNo ( int iWarantyID, int iProductID , String strSerialNo )
        {
            String strQuery = String.Format("SELECT * FROM CMWarantyItems WHERE FK_CMWarantyID = {0} AND FK_ICProductID = {1}", iWarantyID, iProductID);
            if (String.IsNullOrEmpty(strSerialNo) == false)
            {
                strQuery += String.Format(" AND CMWarantyItemSerialNo = '{0}'", strSerialNo);
            }
            DataSet ds = dal.GetDataSet(strQuery);
            if ( ds!=null&&ds.Tables.Count>0&&ds.Tables[0].Rows.Count>0 )
                return (CMWarantyItemsInfo)GetObjectFromDataRow( ds.Tables[0].Rows[0] );

            return null;
        }
	}
	#endregion
}